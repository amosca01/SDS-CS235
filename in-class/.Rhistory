tags$div(p2, style = "width: 45%; padding: 1em;")
)
library(shiny)
fluidPage(
fluidRow(
column(6, p), column(6, p2)
)
)
subplot(
p, p2,
shareY = TRUE
)
library(crosstalk)
shared_data <- txhousing %>%
filter(city %in% c("Austin", "Houston", "Dallas")) %>%
SharedData$new(~year)
p <- ggplot(shared_data, aes(month, median)) +
geom_line(aes(group = year)) +
facet_wrap(~ city)
ggplotly(p, tooltip = "year") %>%
highlight(color = "red") # click on a line to see highlight
library(palmerpenguins)
penguins <- penguins %>% select(species,
bill_length_mm,
bill_depth_mm,
flipper_length_mm,
body_mass_g) %>%
drop_na()
shared_penguins <- SharedData$new(penguins)
p <- GGally::ggpairs(shared_penguins, aes(color = species), columns = 2:5)
highlight(ggplotly(p), on = "plotly_selected") # brush to see brushing and linking
library(leaflet)
shared_quakes <- SharedData$new(quakes)
p <- plot_ly(shared_quakes, x = ~depth, y = ~mag) %>%
add_markers(alpha = 0.5) %>%
highlight("plotly_selected", dynamic = TRUE)
map <- leaflet(shared_quakes) %>%
addTiles() %>%
addCircles()
bscols(widths = c(6, 6), p, map)
unlink("plotly-R-CMV_cache", recursive = TRUE)
knitr::opts_chunk$set(warning = FALSE, message = FALSE)
library(plotly)
library(tidyverse)
p <- txhousing %>%
group_by(city) %>%
plot_ly(x = ~date, y = ~median) %>%
add_lines(alpha = 0.2, name = "All TX Cities", hoverinfo = "none") %>%
filter(city == "Houston") %>%
add_lines(name = "Houston")
p2 <- ggplotly(ggplot(txhousing, aes(date, median)) + geom_bin2d())
library(htmltools)
tagList(p, p2)
tags$div(
style = "display: flex; flex-wrap: wrap",
tags$div(p, style = "width: 45%; padding: 1em;"),
tags$div(p2, style = "width: 45%; padding: 1em;")
)
library(shiny)
fluidPage(
fluidRow(
column(6, p), column(6, p2)
)
)
subplot(
p, p2,
shareY = TRUE
)
library(crosstalk)
shared_data <- txhousing %>%
filter(city %in% c("Austin", "Houston", "Dallas")) %>%
SharedData$new(~year)
p <- ggplot(shared_data, aes(month, median)) +
geom_line(aes(group = year)) +
facet_wrap(~ city)
ggplotly(p, tooltip = "year") %>%
highlight(color = "red") # click on a line to see highlight
library(palmerpenguins)
write_csv(penguins, "palmerpenguins.csv")
knitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE)
help(flu)
knitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE)
help(JohnsonJohnson)
class(JohnsonJohnson)
library(ggfortify)
autoplot(JohnsonJohnson)
JohnsonJohnson %>%
changepoint:: cpt.meanvar() %>%  # Identify change points
autoplot()
library(magrittr) # Because we like piping
library(changepoint)
JohnsonJohnson %>%
changepoint:: cpt.meanvar() %>%  # Identify change points
autoplot()
library(ggpmisc)
JohnsonJohnson %>%
ggplot() + geom_line() +
stat_peaks(colour = "green") +
stat_valleys(colour = "blue")
library(astsa)
help(flu)
flu %>%
ggplot() + geom_line()
decompose(flu) %>%
plot()
# daily HARV met data, 2009-2011
harMetDaily <- read.csv(
file="data/Met_HARV_Daily_2009_2011.csv",
stringsAsFactors = FALSE)
setwd("~/Documents/teaching/SDS-CS235/in-class")
# daily HARV met data, 2009-2011
harMetDaily <- read.csv(
file="Met_HARV_Daily_2009_2011.csv",
stringsAsFactors = FALSE)
# convert date to Date class
harMetDaily$date <- as.Date(harMetDaily$date)
library(tidyverse)
write_csv(JohnsonJohnson, "JohnsonJohnson.csv")
help(JohnsonJohnson)
help(flu)
write_csv(flu, "flu.csv")
write_csv(as.data.frame(flu), "flu.csv")
data(flu)
force(flu)
ds <- as.data.frame(data(flu))
View(ds)
force(flu)
ds <- force(flu)
ds <- data.frame(force(flu))
View(ds)
ds <- as.data.frame(force(flu))
View(ds)
help(flu)
ds <- ts_reshape(flu, type = "wide")
library(TSstudio)
install.packages("TSstudio")
library(TSstudio)
ds <- ts_reshape(flu, type = "wide")
View(ds)
ds <- ts_reshape(flu)
View(ds)
ds <- ts_reshape(flu, type = "long")
View(ds)
View(ds)
write_csv(ds, "flu.csv")
# daily HARV met data, 2009-2011
harMetDaily <- read.csv(
file="Met_HARV_Daily_2009_2011.csv",
stringsAsFactors = FALSE)
# convert date to Date class
harMetDaily$date <- as.Date(harMetDaily$date)
head(harMetDaily)
p <- harMetDaily %>%
ggplot(aes(date, airt)) + geom_point() +
ggtitle("Air Temperature 2009-2011\nNEON Harvard Forest Field Site") +
xlab("Date") + ylab("Air Temperature (C)")
p
library(scales)
p <- p + scale_x_date(labels=date_format("%b %Y"))
p
p <- p + stat_smooth()
p
library(nycflights13)
head(flights)
write_csv(flights, "flights.csv")
head(flights)
flights %>%
dplyr::select(time_hour)
library(lubridate)
flights_0101_0102 <- flights %>%
dplyr::filter(month == 1, day <= 2) %>%
dplyr::group_by(time_hour = lubridate::floor_date(time_hour, "hour")) %>%
dplyr::summarize(num_flights = dplyr::n())
flights_0101_0102 %>%
ggplot(aes(time_hour, num_flights)) +
geom_col()
flights_0101_0102 %>%
ggplot(aes(time_hour, num_flights)) +
geom_col() +
scale_x_datetime(date_breaks = "6 hours", date_labels = "%a %I %p")
# devtools::install_github("dcl-docs/dcldata")
library(dcldata)
devtools::install_github("dcl-docs/dcldata")
install.packages("dcldata")
library(dcldata)
gm_life_expectancy <- read_csv("life_expectancy_at_birth_data_from_ihme.csv")
head(gm_life_expectancy)
south_africa <-
gm_life_expectancy %>%
dplyr::filter(name == "South Africa")
south_africa <-
gm_life_expectancy %>%
dplyr::filter(country == "South Africa")
south_africa %>%
ggplot(aes(year, life_expectancy)) +
geom_line()
south_africa <-
gm_life_expectancy %>%
dplyr::filter(country == "South Africa") %>%
pivot_longer(cols = ~country, names_to = "year")
View(south_africa)
south_africa <-
gm_life_expectancy %>%
dplyr::filter(country == "South Africa") %>%
pivot_longer(cols = select(~country), names_to = "year")
south_africa <-
gm_life_expectancy %>%
dplyr::filter(country == "South Africa") %>%
pivot_longer(cols = !country, names_to = "year")
south_africa %>%
ggplot(aes(year, life_expectancy)) +
geom_line()
south_africa <-
gm_life_expectancy %>%
dplyr::filter(country == "South Africa") %>%
pivot_longer(cols = !country, names_to = "year", values_to = "life_expectancy")
south_africa %>%
ggplot(aes(year, life_expectancy)) +
geom_line()
View(south_africa)
south_africa %>%
ggplot(aes(year, life_expectancy)) #+
gm_life_expectancy <- read_csv("lex.csv")
head(gm_life_expectancy)
south_africa <-
gm_life_expectancy %>%
dplyr::filter(country == "South Africa") %>%
pivot_longer(cols = !country, names_to = "year", values_to = "life_expectancy")
#geom_line()
```
View(gm_life_expectancy)
View(south_africa)
south_africa %>%
ggplot(aes(year, life_expectancy)) +
geom_line()
south_africa %>%
ggplot(aes(x = year, y = life_expectancy)) +
geom_line()
south_africa %>%
ggplot(aes(x = year, y = life_expectancy)) +
geom_point()
south_africa <- read.zoo(south_africa)
View(south_africa)
south_africa <- read.zoo(south_africa %>%
select(year, life_expectancy))
south_africa <- read.zoo(south_africa %>%
select("year", "life_expectancy"))
south_africa <-
gm_life_expectancy %>%
dplyr::filter(country == "South Africa") %>%
pivot_longer(cols = !country, names_to = "year", values_to = "life_expectancy") %>%
select("year", "life_expectancy")
View(south_africa)
south_africa <- read.zoo(south_africa)
south_africa$year <- as.Date(south_africa$year)
south_africa$year <- as.Numeric(south_africa$year)
south_africa$year <- as.numeric(south_africa$year)
south_africa$year <- as.Date(south_africa$year)
south_africa <- read.zoo(south_africa)
south_africa %>%
ggplot(aes(x = year, y = life_expectancy)) +
geom_point()
south_africa %>%
ggplot(aes(x = year, y = life_expectancy)) +
geom_line()
south_africa$year <- as.Date(south_africa$year, format="%Y")
south_africa <-
gm_life_expectancy %>%
dplyr::filter(country == "South Africa") %>%
pivot_longer(cols = !country, names_to = "year", values_to = "life_expectancy") %>%
select("year", "life_expectancy")
south_africa$year <- as.Date(south_africa$year, format="%Y")
south_africa <- read.zoo(south_africa)
south_africa %>%
ggplot(aes(x = year, y = life_expectancy)) +
geom_line()
south_africa <-
gm_life_expectancy %>%
dplyr::filter(country == "South Africa") %>%
pivot_longer(cols = !country, names_to = "year", values_to = "life_expectancy") %>%
select("year", "life_expectancy")
south_africa$year <- as.Date(south_africa$year, format="%Y")
south_africa %>%
ggplot(aes(x = year, y = life_expectancy)) +
geom_line()
south_africa %>%
ggplot(aes(year, life_expectancy)) +
geom_line() +
geom_vline(xintercept = 1918, color = "blue") +
geom_vline(xintercept = 1994, color = "blue")
southern_africa_countries %>%
ggplot(aes(year, life_expectancy, color = name)) +
geom_vline(xintercept = 1994, color = "blue") +
geom_line() +
geom_point() +
geom_text(
aes(label = name),
data = southern_africa_countries %>% dplyr::filter(year == 2015),
color = "black",
hjust = 0,
size = 3,
nudge_x = 0.5
) +
guides(color = "none") +
coord_cartesian(xlim = c(1980, 2020))
southern_africa_countries <-
gm_life_expectancy %>%
dplyr::filter(name %in% c("South Africa", "Swaziland" ,"Lesotho", "Botswana")) %>%
dplyr::filter(year >= 1980, year <= 2015)
southern_africa_countries <-
gm_life_expectancy %>%
dplyr::filter(country %in% c("South Africa", "Swaziland" ,"Lesotho", "Botswana")) %>%
dplyr::filter(year >= 1980, year <= 2015)
southern_africa_countries <-
gm_life_expectancy %>%
dplyr::filter(country %in% c("South Africa", "Swaziland" ,"Lesotho", "Botswana")) %>%
dplyr::mutate(year = as.Date(year, format="%Y")) %>%
dplyr::filter(year >= 1980, year <= 2015)
southern_africa_countries <-
gm_life_expectancy %>%
dplyr::filter(country %in% c("South Africa", "Swaziland" ,"Lesotho", "Botswana")) %>%
dplyr::mutate(year = as.Date(year, format="%Y")) %>%
dplyr::filter(year >= 1980, year <= 2015)
southern_africa_countries <-
gm_life_expectancy %>%
dplyr::filter(country %in% c("South Africa", "Swaziland" ,"Lesotho", "Botswana")) %>%
dplyr::mutate(year = as.Date("year", format="%Y")) %>%
dplyr::filter(year >= 1980, year <= 2015)
southern_africa_countries %>%
ggplot(aes(year, life_expectancy, color = name)) +
geom_vline(xintercept = 1994, color = "blue") +
geom_line() +
geom_point() +
geom_text(
aes(label = name),
data = southern_africa_countries %>% dplyr::filter(year == 2015),
color = "black",
hjust = 0,
size = 3,
nudge_x = 0.5
) +
guides(color = "none") +
coord_cartesian(xlim = c(1980, 2020))
View(southern_africa_countries)
southern_africa_countries <-
gm_life_expectancy %>%
dplyr::filter(country %in% c("South Africa", "Swaziland" ,"Lesotho", "Botswana"))
View(southern_africa_countries)
southern_africa_countries <-
gm_life_expectancy %>%
dplyr::filter(country %in% c("South Africa", "Swaziland" ,"Lesotho", "Botswana")) %>%
pivot_longer(cols = !country, names_to = "year", values_to = "life_expectancy") %>%
select("year", "life_expectancy")
View(southern_africa_countries)
southern_africa_countries <-
gm_life_expectancy %>%
dplyr::filter(country %in% c("South Africa", "Swaziland" ,"Lesotho", "Botswana")) %>%
pivot_longer(cols = !country, names_to = "year", values_to = "life_expectancy") %>%
select("year", "life_expectancy") %>%
mutate(year = as.Date(year, format = "%Y"))
southern_africa_countries <-
gm_life_expectancy %>%
dplyr::filter(country %in% c("South Africa", "Swaziland" ,"Lesotho", "Botswana")) %>%
pivot_longer(cols = !country, names_to = "year", values_to = "life_expectancy") %>%
select("year", "life_expectancy") %>%
mutate(year = as.Date(year, format = "%Y")) %>%
dplyr::filter(year >= 1980, year <= 2015)
southern_africa_countries %>%
ggplot(aes(year, life_expectancy, color = name)) +
geom_vline(xintercept = 1994, color = "blue") +
geom_line() +
geom_point() +
geom_text(
aes(label = name),
data = southern_africa_countries %>% dplyr::filter(year == 2015),
color = "black",
hjust = 0,
size = 3,
nudge_x = 0.5
) +
guides(color = "none") +
coord_cartesian(xlim = c(1980, 2020))
southern_africa_countries %>%
ggplot(aes(year, life_expectancy, color = country)) +
geom_vline(xintercept = 1994, color = "blue") +
geom_line() +
geom_point() +
geom_text(
aes(label = country),
data = southern_africa_countries %>% dplyr::filter(year == 2015),
color = "black",
hjust = 0,
size = 3,
nudge_x = 0.5
) +
guides(color = "none") +
coord_cartesian(xlim = c(1980, 2020))
southern_africa_countries <-
gm_life_expectancy %>%
dplyr::filter(country %in% c("South Africa", "Swaziland" ,"Lesotho", "Botswana")) %>%
pivot_longer(cols = !country, names_to = "year", values_to = "life_expectancy") %>%
select("year", "life_expectancy") %>%
mutate(year = as.Date(year, format = "%Y")) %>%
dplyr::filter(year >= 1980, year <= 2015)
southern_africa_countries <-
gm_life_expectancy %>%
dplyr::filter(country %in% c("South Africa", "Swaziland" ,"Lesotho", "Botswana")) %>%
pivot_longer(cols = !country, names_to = "year", values_to = "life_expectancy") %>%
select("year", "life_expectancy") %>%
mutate(year = as.Date(year, format = "%Y"))
View(southern_africa_countries)
southern_africa_countries <-
gm_life_expectancy %>%
dplyr::filter(country %in% c("South Africa", "Swaziland" ,"Lesotho", "Botswana")) %>%
pivot_longer(cols = !country, names_to = "year", values_to = "life_expectancy") %>%
mutate(year = as.Date(year, format = "%Y"))
View(southern_africa_countries)
southern_africa_countries <-
gm_life_expectancy %>%
dplyr::filter(country %in% c("South Africa", "Swaziland" ,"Lesotho", "Botswana")) %>%
pivot_longer(cols = !country, names_to = "year", values_to = "life_expectancy") %>%
mutate(year = as.Date(year, format = "%Y")) %>%
dplyr::filter(year >= 1980, year <= 2015)
southern_africa_countries %>%
ggplot(aes(year, life_expectancy, color = country)) +
geom_vline(xintercept = 1994, color = "blue") +
geom_line() +
geom_point() +
geom_text(
aes(label = country),
data = southern_africa_countries %>% dplyr::filter(year == 2015),
color = "black",
hjust = 0,
size = 3,
nudge_x = 0.5
) +
guides(color = "none") +
coord_cartesian(xlim = c(1980, 2020))
southern_africa_countries <-
gm_life_expectancy %>%
dplyr::filter(country %in% c("South Africa", "Swaziland" ,"Lesotho", "Botswana")) %>%
pivot_longer(cols = !country, names_to = "year", values_to = "life_expectancy") %>%
mutate(year = as.Date(year, format = "%Y"))
southern_africa_countries %>%
ggplot(aes(year, life_expectancy, color = country)) +
geom_vline(xintercept = 1994, color = "blue") +
geom_line() +
geom_point() +
geom_text(
aes(label = country),
data = southern_africa_countries %>% dplyr::filter(year == 2015),
color = "black",
hjust = 0,
size = 3,
nudge_x = 0.5
) +
guides(color = "none") +
coord_cartesian(xlim = c(1980, 2020))
southern_africa_countries <-
gm_life_expectancy %>%
dplyr::filter(country %in% c("South Africa", "Swaziland" ,"Lesotho", "Botswana")) %>%
pivot_longer(cols = !country, names_to = "year", values_to = "life_expectancy") %>%
mutate(year = as.Date(year, format = "%Y-01-01"))
southern_africa_countries %>%
ggplot(aes(year, life_expectancy, color = country)) +
geom_vline(xintercept = 1994, color = "blue") +
geom_line() +
geom_point() +
geom_text(
aes(label = country),
data = southern_africa_countries %>% dplyr::filter(year == 2015),
color = "black",
hjust = 0,
size = 3,
nudge_x = 0.5
) +
guides(color = "none") +
coord_cartesian(xlim = c(1980, 2020))
southern_africa_countries <-
gm_life_expectancy %>%
dplyr::filter(country %in% c("South Africa", "Swaziland" ,"Lesotho", "Botswana")) %>%
pivot_longer(cols = !country, names_to = "year", values_to = "life_expectancy") %>%
mutate(year = as.numeric(year) %>%
dplyr::filter(year >= 1980, year <= 2015)
southern_africa_countries <-
southern_africa_countries <-
gm_life_expectancy %>%
dplyr::filter(country %in% c("South Africa", "Swaziland" ,"Lesotho", "Botswana")) %>%
pivot_longer(cols = !country, names_to = "year", values_to = "life_expectancy") %>%
mutate(year = as.numeric(year))
View(southern_africa_countries)
southern_africa_countries <-
gm_life_expectancy %>%
dplyr::filter(country %in% c("South Africa", "Swaziland" ,"Lesotho", "Botswana")) %>%
pivot_longer(cols = !country, names_to = "year", values_to = "life_expectancy") %>%
mutate(year = as.numeric(year)) %>%
dplyr::filter(year >= 1980 & year <= 2015)
southern_africa_countries %>%
ggplot(aes(year, life_expectancy, color = country)) +
geom_vline(xintercept = 1994, color = "blue") +
geom_line() +
geom_point() +
geom_text(
aes(label = country),
data = southern_africa_countries %>% dplyr::filter(year == 2015),
color = "black",
hjust = 0,
size = 3,
nudge_x = 0.5
) +
guides(color = "none") +
coord_cartesian(xlim = c(1980, 2020))
